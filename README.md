sql scripts 
create table if not exists public.food_type
(
    id        integer generated by default as identity
        primary key,
    type_name varchar
);

alter table public.food_type
    owner to postgres;

create table if not exists public.dishes
(
    id           integer generated by default as identity
        primary key,
    dish_name    varchar,
    price        integer,
    id_food_type integer
        references public.food_type
        constraint dishes_id_food_type_fkey1
            references public.food_type
        constraint dishes_id_food_type_fkey2
            references public.food_type,
    description  varchar
);

alter table public.dishes
    owner to postgres;

create table if not exists public.units
(
    id   integer generated by default as identity
        primary key,
    name varchar
);

alter table public.units
    owner to postgres;

create table if not exists public.ingredients
(
    id             integer generated by default as identity
        primary key,
    name           varchar,
    id_units       integer
        references public.units
        constraint ingredients_id_units_fkey1
            references public.units
        constraint ingredients_id_units_fkey2
            references public.units,
    price_per_unit integer default nextval('ingredients_price_per_unit_seq'::regclass) not null
);

alter table public.ingredients
    owner to postgres;

create table if not exists public.foodcalculations
(
    id_foodcalculation integer generated by default as identity
        primary key,
    id_dishes          integer
        references public.dishes,
    id_ingredients     integer
        references public.ingredients,
    amountinoneportion integer
);

alter table public.foodcalculations
    owner to postgres;

create table if not exists public.orders
(
    id        integer default nextval('orders_id_seq'::regclass) not null
        primary key,
    total     numeric,
    orderdate timestamp
);

alter table public.orders
    owner to postgres;

create table if not exists public."order"
(
    id             serial
        primary key,
    dishid         integer
        constraint order_id_food_fkey
            references public.dishes,
    numberofdishes integer,
    orderid        integer
        constraint orderid
            references public.orders
);

alter table public."order"
    owner to postgres;

create trigger update_total_sum_trigger
    after insert or update or delete
    on public."order"
    for each row
execute procedure public.update_total_sum();

